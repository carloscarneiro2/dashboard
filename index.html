<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Dashboard de Reclamações</title>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>

  <style>
    * {
      box-sizing: border-box;
    }
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 20px;
      background: #f4f4f4;
    }
    h1 {
      text-align: center;
      margin-bottom: 25px;
    }
    .cards {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 15px;
      margin-bottom: 25px;
    }
    .card {
      background: #ffffff;
      padding: 15px;
      border-radius: 10px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      text-align: center;
    }
    .card-title {
      font-size: 14px;
      color: #555;
      margin-bottom: 6px;
    }
    .card-value {
      font-size: 24px;
      font-weight: bold;
    }

    .charts {
      display: grid;
      grid-template-columns: 2fr 1fr;
      gap: 20px;
      margin-bottom: 25px;
    }
    .chart-box {
      background: #ffffff;
      padding: 15px;
      border-radius: 10px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      min-height: 260px;
    }
    .chart-box h3 {
      margin-top: 0;
      margin-bottom: 10px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      background: #ffffff;
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    th, td {
      padding: 8px 10px;
      border-bottom: 1px solid #ddd;
      font-size: 13px;
    }
    th {
      background: #e0f0ff;
      text-align: left;
    }
    tr:hover {
      background: #f5f5f5;
    }

    @media (max-width: 900px) {
      .cards {
        grid-template-columns: repeat(2, 1fr);
      }
      .charts {
        grid-template-columns: 1fr;
      }
    }
    @media (max-width: 600px) {
      .cards {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <h1>Dashboard de Reclamações</h1>

  <!-- Cards -->
  <div class="cards">
    <div class="card">
      <div class="card-title">Total de Reclamações</div>
      <div class="card-value" id="card-total"></div>
    </div>
    <div class="card">
      <div class="card-title">Reclamações Resolvidas</div>
      <div class="card-value" id="card-resolvidas"></div>
    </div>
    <div class="card">
      <div class="card-title">Reclamações Pendentes</div>
      <div class="card-value" id="card-pendentes"></div>
    </div>
    <div class="card">
      <div class="card-title">% Resolvidas</div>
      <div class="card-value" id="card-percentual"></div>
    </div>
  </div>

  <!-- Gráficos -->
  <div class="charts">
    <div class="chart-box">
      <h3>Reclamações por Tipo de Problema</h3>
      <canvas id="chart-tipo"></canvas>
    </div>
    <div class="chart-box">
      <h3>Reclamações por Status</h3>
      <canvas id="chart-status"></canvas>
    </div>
  </div>

  <!-- Tabela -->
  <h3>Detalhamento das Reclamações</h3>
  <table>
    <thead>
      <tr>
        <th>ID</th>
        <th>Cliente</th>
        <th>Data</th>
        <th>Tipo de Problema</th>
        <th>Status</th>
        <th>Descrição</th>
      </tr>
    </thead>
    <tbody id="tbody-reclamacoes"></tbody>
  </table>

  <script>
    // ===== 1. Dados (mesmos da sua planilha) =====
    const reclamacoes = [
      {
        id: 1,
        cliente: "João Silva",
        data: "2025-01-05",
        tipoProblema: "Atraso na entrega",
        descricao: "Produto chegou 3 dias após o prazo",
        status: "Pendente"
      },
      {
        id: 2,
        cliente: "Maria Oliveira",
        data: "2025-01-06",
        tipoProblema: "Produto danificado",
        descricao: "Item chegou com arranhões",
        status: "Em análise"
      },
      {
        id: 3,
        cliente: "Carlos Santos",
        data: "2025-01-07",
        tipoProblema: "Cobrança indevida",
        descricao: "Cobrança adicional no cartão",
        status: "Resolvido"
      },
      {
        id: 4,
        cliente: "Ana Souza",
        data: "2025-01-08",
        tipoProblema: "Atendimento ruim",
        descricao: "Mal atendimento via telefone",
        status: "Pendente"
      },
      {
        id: 5,
        cliente: "Lucas Pereira",
        data: "2025-01-09",
        tipoProblema: "Erro no pedido",
        descricao: "Pedido veio diferente do que foi solicitado",
        status: "Em análise"
      }
    ];

    // ===== 2. Indicadores para os cards =====
    const total = reclamacoes.length;
    const resolvidas = reclamacoes.filter(r => r.status === "Resolvido").length;
    const pendentes = reclamacoes.filter(r => r.status === "Pendente").length;
    const percentualResolvidas = total > 0 ? (resolvidas / total) * 100 : 0;

    document.getElementById("card-total").textContent = total;
    document.getElementById("card-resolvidas").textContent = resolvidas;
    document.getElementById("card-pendentes").textContent = pendentes;
    document.getElementById("card-percentual").textContent =
      percentualResolvidas.toFixed(0) + "%";

    // ===== 3. Preparar dados para gráficos =====

    // Por tipo de problema
    const tipos = [...new Set(reclamacoes.map(r => r.tipoProblema))];
    const qtdPorTipo = tipos.map(tipo =>
      reclamacoes.filter(r => r.tipoProblema === tipo).length
    );

    // Por status
    const statuses = [...new Set(reclamacoes.map(r => r.status))];
    const qtdPorStatus = statuses.map(st =>
      reclamacoes.filter(r => r.status === st).length
    );

    // ===== 4. Gráfico de barras (tipo de problema) =====
    const ctxTipo = document.getElementById("chart-tipo");
    new Chart(ctxTipo, {
      type: "bar",
      data: {
        labels: tipos,
        datasets: [
          {
            label: "Quantidade",
            data: qtdPorTipo
          }
        ]
      },
      options: {
        responsive: true,
        scales: {
          y: { beginAtZero: true }
        }
      }
    });

    // ===== 5. Gráfico de rosca (status) =====
    const ctxStatus = document.getElementById("chart-status");
    new Chart(ctxStatus, {
      type: "doughnut",
      data: {
        labels: statuses,
        datasets: [
          {
            data: qtdPorStatus
          }
        ]
      },
      options: {
        responsive: true
      }
    });

    // ===== 6. Preencher tabela =====
    const tbody = document.getElementById("tbody-reclamacoes");
    reclamacoes.forEach(r => {
      const tr = document.createElement("tr");

      const tdId = document.createElement("td");
      tdId.textContent = r.id;

      const tdCliente = document.createElement("td");
      tdCliente.textContent = r.cliente;

      const tdData = document.createElement("td");
      tdData.textContent = new Date(r.data).toLocaleDateString("pt-BR");

      const tdTipo = document.createElement("td");
      tdTipo.textContent = r.tipoProblema;

      const tdStatus = document.createElement("td");
      tdStatus.textContent = r.status;

      const tdDesc = document.createElement("td");
      tdDesc.textContent = r.descricao;

      tr.appendChild(tdId);
      tr.appendChild(tdCliente);
      tr.appendChild(tdData);
      tr.appendChild(tdTipo);
      tr.appendChild(tdStatus);
      tr.appendChild(tdDesc);

      tbody.appendChild(tr);
    });
  </script>
</body>
</html>
